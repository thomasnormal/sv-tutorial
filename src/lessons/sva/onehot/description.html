<p>SystemVerilog provides built-in functions for checking bit-count invariants — exactly what bus arbiters need:</p>
<ul>
  <li><code><dfn data-card="$onehot(v) is a SystemVerilog system function that returns true when exactly one bit of v is 1 and all others are 0. It's used in assertions to verify that bus arbiters grant access to exactly one requester, that FSM one-hot encodings have exactly one active state, and that priority encoder outputs are correctly one-hot. $onehot0 allows zero or one bits — useful for optional or idle states.">$onehot</dfn>(v)</code> — true when <em>exactly one</em> bit of <code>v</code> is 1</li>
  <li><code>$onehot0(v)</code> — true when <em>zero or one</em> bits are 1</li>
  <li><code>$countones(v)</code> — returns the <em>number</em> of set bits; use in expressions like <code>$countones(v) &lt;= 2</code></li>
</ul>
<p>Open <code>arbiter_check.sv</code> and add two properties:</p>
<ol>
  <li><strong>grant_onehot_p</strong>: whenever <code>any_grant</code> is high, <code>grant</code> must be one-hot — use <code>$onehot(grant)</code></li>
  <li><strong>grant_idle_p</strong>: whenever <code>any_grant</code> is low, <code>grant</code> must be all zeros</li>
</ol>
<blockquote><p><code>|req</code> is a reduction OR: it is 1 if any bit of <code>req</code> is 1. It is often used as a shorthand antecedent: <code>|req |-> $onehot0(gnt)</code> means "when any request is active, at most one grant is given."</p></blockquote>
